<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FigureYa AIæ™ºèƒ½æœç´¢ - ç”Ÿç‰©åŒ»å­¦æ•°æ®åˆ†æåŠ©æ‰‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .ai-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            margin: 10px 5px;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
        }

        .search-container {
            padding: 40px 30px;
            background: #f8f9fa;
            text-align: center;
        }

        .search-box-wrapper {
            max-width: 700px;
            margin: 0 auto;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 20px 60px 20px 25px;
            font-size: 1.1em;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            outline: none;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .search-input:focus {
            border-color: #4CAF50;
            box-shadow: 0 8px 25px rgba(76,175,80,0.15);
            transform: translateY(-2px);
        }

        .search-button {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-button:hover {
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 5px 15px rgba(76,175,80,0.3);
        }

        .search-button.loading {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
        }

        .mode-toggle {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .mode-button {
            padding: 10px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .mode-button.active {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76,175,80,0.2);
        }

        .results-container {
            padding: 0 30px 30px;
        }

        .ai-response {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border-left: 4px solid #4CAF50;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(76,175,80,0.1);
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .ai-response h3 {
            color: #2e7d32;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-response .ai-icon {
            background: #4CAF50;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
        }

        .ai-response .response-text {
            line-height: 1.6;
            color: #333;
            font-size: 1.05em;
        }

        .ai-response .meta-info {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(76,175,80,0.2);
            font-size: 0.9em;
            color: #666;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .confidence-score {
            background: #4CAF50;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 500;
        }

        .traditional-results {
            margin-top: 30px;
        }

        .result-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .result-item:hover {
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transform: translateY(-2px);
            border-color: #4CAF50;
        }

        .result-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .result-snippet {
            color: #666;
            line-height: 1.5;
            font-size: 0.95em;
        }

        .result-meta {
            margin-top: 10px;
            font-size: 0.85em;
            color: #888;
        }

        .highlight {
            background: #fff59d;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .loading-indicator {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .loading-indicator .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4CAF50;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .error-message {
            background: #ffebee;
            border: 1px solid #f8bbd9;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            color: #c62828;
            text-align: center;
        }

        .examples {
            background: #f5f5f5;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 30px 30px;
        }

        .examples h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .example-queries {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .example-query {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .example-query:hover {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
            transform: translateY(-1px);
        }

        .info-section {
            background: #e3f2fd;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 30px;
            border-left: 4px solid #2196F3;
        }

        .info-section h3 {
            color: #1976D2;
            margin-bottom: 15px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .feature-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .feature-card h4 {
            color: #4CAF50;
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .search-container {
                padding: 30px 20px;
            }

            .results-container {
                padding: 0 20px 20px;
            }

            .mode-toggle {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>FigureYa AIæ™ºèƒ½æœç´¢</h1>
            <p>åŸºäºGLM-4çš„ç”Ÿç‰©åŒ»å­¦æ•°æ®åˆ†æä¸“å®¶åŠ©æ‰‹</p>
            <div>
                <span class="ai-badge">ğŸ§  AIé©±åŠ¨</span>
                <span class="ai-badge">ğŸ”¬ ä¸“ä¸šåˆ†æ</span>
                <span class="ai-badge">âš¡ å®æ—¶å“åº”</span>
                <span class="ai-badge">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ä¼˜åŒ–</span>
            </div>
        </div>

        <div class="info-section">
            <h3>ğŸŒŸ AIæœç´¢åŠŸèƒ½ç‰¹ç‚¹</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>æ™ºèƒ½ç†è§£</h4>
                    <p>ç†è§£å¤æ‚çš„ç”Ÿç‰©åŒ»å­¦é—®é¢˜ï¼Œä¸æ˜¯ç®€å•çš„å…³é”®è¯åŒ¹é…</p>
                </div>
                <div class="feature-card">
                    <h4>ä¸“ä¸šå»ºè®®</h4>
                    <p>åŸºäºGLM-4æ¨¡å‹çš„ä¸“ä¸šç”Ÿç‰©åŒ»å­¦åˆ†æå»ºè®®</p>
                </div>
                <div class="feature-card">
                    <h4>ä¸ªæ€§åŒ–æ¨è</h4>
                    <p>æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚æ¨èåˆé€‚çš„FigureYaæ¨¡å—</p>
                </div>
                <div class="feature-card">
                    <h4>é«˜ç½®ä¿¡åº¦</h4>
                    <p>æä¾›ç½®ä¿¡åº¦è¯„åˆ†ï¼Œç¡®ä¿å›ç­”çš„å¯é æ€§</p>
                </div>
            </div>
        </div>

        <div class="search-container">
            <div class="search-box-wrapper">
                <input
                    type="text"
                    id="searchInput"
                    class="search-input"
                    placeholder="è¯·è¾“å…¥æ‚¨çš„ç”Ÿç‰©åŒ»å­¦åˆ†æé—®é¢˜ï¼Œä¾‹å¦‚ï¼šRNA-seqå·®å¼‚è¡¨è¾¾åˆ†æçš„æ–¹æ³•..."
                    autocomplete="off"
                >
                <button id="searchButton" class="search-button" onclick="performSearch()">
                    <span id="searchIcon">ğŸ”</span>
                </button>
            </div>

            <div class="mode-toggle">
                <button class="mode-button active" onclick="setMode('ai')">ğŸ¤– AIæ™ºèƒ½æœç´¢</button>
                <button class="mode-button" onclick="setMode('traditional')">ğŸ“š ä¼ ç»Ÿæœç´¢</button>
                <button class="mode-button" onclick="setMode('both')">ğŸ”„ æ··åˆæ¨¡å¼</button>
            </div>
        </div>

        <div class="examples">
            <h3>ğŸ’¡ ç¤ºä¾‹é—®é¢˜</h3>
            <div class="example-queries">
                <div class="example-query" onclick="setQuery('RNA-seqå·®å¼‚è¡¨è¾¾åˆ†æçš„æœ€ä½³æ–¹æ³•')">RNA-seqå·®å¼‚è¡¨è¾¾åˆ†æçš„æœ€ä½³æ–¹æ³•</div>
                <div class="example-query" onclick="setQuery('å¦‚ä½•è§£é‡Šç”Ÿå­˜åˆ†æçš„ç»“æœ')">å¦‚ä½•è§£é‡Šç”Ÿå­˜åˆ†æçš„ç»“æœ</div>
                <div class="example-query" onclick="setQuery('å•ç»†èƒæ•°æ®è´¨æ§çš„å…³é”®æŒ‡æ ‡')">å•ç»†èƒæ•°æ®è´¨æ§çš„å…³é”®æŒ‡æ ‡</div>
                <div class="example-query" onclick="setQuery('PCAåˆ†æç»“æœå¦‚ä½•ä¸“ä¸šè§£è¯»')">PCAåˆ†æç»“æœå¦‚ä½•ä¸“ä¸šè§£è¯»</div>
                <div class="example-query" onclick="setQuery('é€‰æ‹©åˆé€‚çš„ç»Ÿè®¡æ£€éªŒæ–¹æ³•')">é€‰æ‹©åˆé€‚çš„ç»Ÿè®¡æ£€éªŒæ–¹æ³•</div>
                <div class="example-query" onclick="setQuery('ç«å±±å›¾ç»“æœçš„ä¸“ä¸šè§£è¯»')">ç«å±±å›¾ç»“æœçš„ä¸“ä¸šè§£è¯»</div>
            </div>
        </div>

        <div class="results-container" id="resultsContainer">
            <!-- Results will be displayed here -->
        </div>
    </div>

    <script>
        let currentMode = 'ai';
        let isLoading = false;

        // ç¤ºä¾‹çŸ¥è¯†åº“æ•°æ®
        const figureyaKnowledge = [
            {
                title: "FigureYa59volcanoV2 - ç«å±±å›¾åˆ†æ",
                content: "ç”¨äºRNA-seqå·®å¼‚è¡¨è¾¾åˆ†æçš„å¯è§†åŒ–å·¥å…·ï¼Œå±•ç¤ºåŸºå› è¡¨è¾¾çš„æ˜¾è‘—æ€§å’Œå€æ•°å˜åŒ–å…³ç³»ã€‚æ”¯æŒDESeq2ã€edgeRã€limmaç­‰æ–¹æ³•çš„è¾“å‡ºç»“æœã€‚",
                module: "FigureYa59volcanoV2",
                keywords: ["RNA-seq", "å·®å¼‚è¡¨è¾¾", "ç«å±±å›¾", "DEG", "pvalue", "logFC"]
            },
            {
                title: "FigureYa36nSurvV3 - ç”Ÿå­˜åˆ†æ",
                content: "Kaplan-Meierç”Ÿå­˜æ›²çº¿åˆ†æå·¥å…·ï¼Œæ”¯æŒCoxå›å½’æ¨¡å‹ï¼Œè®¡ç®—é£é™©æ¯”å’Œç½®ä¿¡åŒºé—´ï¼Œé€‚ç”¨äºä¸´åºŠé¢„ååˆ†æã€‚",
                module: "FigureYa36nSurvV3",
                keywords: ["ç”Ÿå­˜åˆ†æ", "Kaplan-Meier", "Coxå›å½’", "é¢„å", "é£é™©æ¯”"]
            },
            {
                title: "FigureYa274MuSiCbulkProop - å•ç»†èƒåˆ†æ",
                content: "å•ç»†èƒRNAæµ‹åºæ•°æ®åˆ†æå·¥å…·ï¼ŒåŒ…å«ç»†èƒè´¨æ§ã€é™ç»´ã€èšç±»ã€å·®å¼‚è¡¨è¾¾ç­‰å®Œæ•´åˆ†ææµç¨‹ã€‚",
                module: "FigureYa274MuSiCbulkProop",
                keywords: ["å•ç»†èƒ", "scRNA-seq", "è´¨æ§", "èšç±»", "UMAP", "tSNE"]
            },
            {
                title: "FigureYa38PCA - ä¸»æˆåˆ†åˆ†æ",
                content: "é«˜ç»´æ•°æ®é™ç»´å·¥å…·ï¼Œç”¨äºæ ·æœ¬å…³ç³»å¯è§†åŒ–å’Œå¼‚å¸¸å€¼æ£€æµ‹ï¼Œæ”¯æŒä¸»æˆåˆ†è´¡çŒ®åº¦åˆ†æã€‚",
                module: "FigureYa38PCA",
                keywords: ["PCA", "ä¸»æˆåˆ†", "é™ç»´", "å¯è§†åŒ–", "å¼‚å¸¸å€¼"]
            }
        ];

        function setMode(mode) {
            currentMode = mode;

            // Update button states
            document.querySelectorAll('.mode-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Clear results when mode changes
            document.getElementById('resultsContainer').innerHTML = '';
        }

        function setQuery(query) {
            document.getElementById('searchInput').value = query;
            performSearch();
        }

        async function performSearch() {
            if (isLoading) return;

            const query = document.getElementById('searchInput').value.trim();
            if (!query) {
                showMessage('è¯·è¾“å…¥æœç´¢é—®é¢˜', 'warning');
                return;
            }

            setLoading(true);
            const resultsContainer = document.getElementById('resultsContainer');

            try {
                if (currentMode === 'ai' || currentMode === 'both') {
                    // æ¨¡æ‹ŸAIæœç´¢ï¼ˆå®é™…éƒ¨ç½²æ—¶è¿æ¥çœŸå®APIï¼‰
                    const aiResult = await simulateAISearch(query);
                    displayAIResult(aiResult);
                }

                if (currentMode === 'traditional' || currentMode === 'both') {
                    const traditionalResults = performTraditionalSearch(query);
                    displayTraditionalResults(traditionalResults);
                }

            } catch (error) {
                showMessage('æœç´¢å‡ºé”™: ' + error.message, 'error');
            } finally {
                setLoading(false);
            }
        }

        async function simulateAISearch(query) {
            // æ¨¡æ‹ŸAPIå»¶è¿Ÿ
            await new Promise(resolve => setTimeout(resolve, 1500));

            // æ¨¡æ‹ŸAIå›ç­”ç”Ÿæˆ
            const responses = {
                "RNA-seq": {
                    answer: "åŸºäºæ‚¨çš„æŸ¥è¯¢ï¼Œæˆ‘æ¨èä½¿ç”¨**FigureYa59volcanoV2**æ¨¡å—è¿›è¡ŒRNA-seqå·®å¼‚è¡¨è¾¾åˆ†æã€‚\n\nğŸ¯ **æ¨èç†ç”±**ï¼š\nâ€¢ ç«å±±å›¾æ˜¯æœ€ç›´è§‚çš„å·®å¼‚è¡¨è¾¾åŸºå› å¯è§†åŒ–æ–¹æ³•\nâ€¢ èƒ½å¤ŸåŒæ—¶å±•ç¤ºç»Ÿè®¡æ˜¾è‘—æ€§å’Œç”Ÿç‰©å­¦æ„ä¹‰\nâ€¢ æ”¯æŒDESeq2ã€edgeRã€limmaç­‰å¤šç§åˆ†ææ–¹æ³•\n\nğŸ“Š **åˆ†ææ­¥éª¤**ï¼š\n1. æ•°æ®é¢„å¤„ç†å’Œè´¨é‡æ§åˆ¶\n2. ä½¿ç”¨DESeq2è¿›è¡Œå·®å¼‚è¡¨è¾¾åˆ†æ\n3. è®¾ç½®åˆé€‚çš„é˜ˆå€¼ï¼ˆpvalue < 0.05, |logFC| > 1ï¼‰\n4. ç”Ÿæˆç«å±±å›¾è¿›è¡Œç»“æœå¯è§†åŒ–\n\nğŸ’¡ **å‚æ•°å»ºè®®**ï¼š\nâ€¢ pvalueé˜ˆå€¼ï¼š0.05ï¼ˆç»Ÿè®¡å­¦æ˜¾è‘—æ€§ï¼‰\nâ€¢ logFCé˜ˆå€¼ï¼š1.0ï¼ˆç”Ÿç‰©å­¦æ„ä¹‰ï¼Œ2å€å˜åŒ–ï¼‰\nâ€¢ å»ºè®®ç»“åˆåŠŸèƒ½å¯Œé›†åˆ†æè¿›è¡Œæ·±åº¦è§£è¯»",
                    confidence: 0.92,
                    sources: ["FigureYa59volcanoV2", "FigureYa9heatmap"]
                },
                "ç”Ÿå­˜åˆ†æ": {
                    answer: "å¯¹äºç”Ÿå­˜åˆ†æï¼Œæˆ‘æ¨èä½¿ç”¨**FigureYa36nSurvV3**æ¨¡å—ã€‚\n\nğŸ”¬ **æ–¹æ³•é€‰æ‹©**ï¼š\nâ€¢ **Kaplan-Meieræ³•**ï¼šé€‚ç”¨äºç”Ÿå­˜æ›²çº¿ä¼°è®¡å’Œæ¯”è¾ƒ\nâ€¢ **Coxå›å½’æ¨¡å‹**ï¼šç”¨äºå¤šå› ç´ é¢„ååˆ†æ\n\nğŸ“ˆ **åˆ†æè¦ç‚¹**ï¼š\n1. æ•°æ®å‡†å¤‡ï¼šç”Ÿå­˜æ—¶é—´ã€äº‹ä»¶çŠ¶æ€ã€åå˜é‡\n2. ç”Ÿå­˜æ›²çº¿ç»˜åˆ¶ï¼šKaplan-Meieræ³•\n3. ç»Ÿè®¡æ£€éªŒï¼šLog-rankæ£€éªŒæ¯”è¾ƒç»„é—´å·®å¼‚\n4. é£é™©è¯„ä¼°ï¼šè®¡ç®—é£é™©æ¯”(HR)å’Œç½®ä¿¡åŒºé—´\n\nâš ï¸ **æ³¨æ„äº‹é¡¹**ï¼š\nâ€¢ ç¡®ä¿è¶³å¤Ÿçš„äº‹ä»¶æ•°é‡ï¼ˆå»ºè®®æ¯ç»„â‰¥10ä¸ªäº‹ä»¶ï¼‰\nâ€¢ æ£€æŸ¥æ¯”ä¾‹é£é™©å‡è®¾\nâ€¢ è€ƒè™‘æ··æ‚å› ç´ çš„å½±å“",
                    confidence: 0.89,
                    sources: ["FigureYa36nSurvV3", "FigureYa1survivalCurve_update"]
                },
                "å•ç»†èƒ": {
                    answer: "å•ç»†èƒRNAæµ‹åºåˆ†ææ˜¯ä¸€ä¸ªå¤æ‚çš„å¤šæ­¥éª¤æµç¨‹ï¼Œæ¨èä½¿ç”¨**FigureYa274MuSiCbulkProop**æ¨¡å—ã€‚\n\nğŸ” **å®Œæ•´åˆ†ææµç¨‹**ï¼š\n\n1. **æ•°æ®è´¨æ§**\n   â€¢ ç»†èƒè¿‡æ»¤ï¼šæ’é™¤ä½è´¨é‡ç»†èƒ\n   â€¢ åŸºå› è¿‡æ»¤ï¼šæ’é™¤ä½è¡¨è¾¾åŸºå› \n   â€¢ åŒç»†èƒæ£€æµ‹å’Œç§»é™¤\n\n2. **æ ‡å‡†åŒ–å’Œå½’ä¸€åŒ–**\n   â€¢ è®¡ç®—æ ‡å‡†åŒ–è¡¨è¾¾å€¼\n   â€¢ æ‰¹æ¬¡æ•ˆåº”æ ¡æ­£\n\n3. **ç‰¹å¾é€‰æ‹©å’Œé™ç»´**\n   â€¢ é«˜å˜åŸºå› è¯†åˆ«\n   â€¢ PCAé™ç»´åˆ†æ\n   â€¢ UMAP/tSNEå¯è§†åŒ–\n\n4. **èšç±»åˆ†æ**\n   â€¢ ç»†èƒç±»å‹è¯†åˆ«\n   â€¢ äºšç¾¤åˆ†æ\n\n5. **å·®å¼‚è¡¨è¾¾åˆ†æ**\n   â€¢ ç°¾ç¾¤é—´å·®å¼‚åŸºå› è¯†åˆ«\n   â€¢ æ ‡è®°åŸºå› ç­›é€‰\n\nğŸ’¡ **è´¨æ§å…³é”®æŒ‡æ ‡**ï¼š\nâ€¢ æ¯ä¸ªç»†èƒæ£€æµ‹åˆ°çš„åŸºå› æ•°ï¼ˆ200-6000ä¸ºä½³ï¼‰\nâ€¢ çº¿ç²’ä½“åŸºå› æ¯”ä¾‹ï¼ˆ<10-15%ï¼‰\nâ€¢ rRNAæ¯”ä¾‹ï¼ˆ<5%ï¼‰",
                    confidence: 0.95,
                    sources: ["FigureYa274MuSiCbulkProop", "FigureYa243scMarkerGroupHeatmap"]
                }
            };

            // æ ¹æ®æŸ¥è¯¢å†…å®¹è¿”å›ç›¸åº”å›ç­”
            for (const [key, value] of Object.entries(responses)) {
                if (query.includes(key)) {
                    return {
                        query: query,
                        answer: value.answer,
                        confidence: value.confidence,
                        sources: value.sources,
                        model: "GLM-4-Flash"
                    };
                }
            }

            // é»˜è®¤å›ç­”
            return {
                query: query,
                answer: `åŸºäºæ‚¨çš„æŸ¥è¯¢"${query}"ï¼Œæˆ‘å»ºè®®æ‚¨ï¼š\n\n1. **æ˜ç¡®åˆ†æç›®æ ‡**ï¼šç¡®å®šæ‚¨æƒ³è¦è§£å†³çš„å…·ä½“ç”Ÿç‰©å­¦é—®é¢˜\n2. **é€‰æ‹©åˆé€‚æ¨¡å—**ï¼šæ ¹æ®æ•°æ®ç±»å‹é€‰æ‹©ç›¸åº”çš„FigureYaæ¨¡å—\n3. **æ•°æ®å‡†å¤‡**ï¼šç¡®ä¿æ•°æ®æ ¼å¼ç¬¦åˆè¦æ±‚ï¼Œè¿›è¡Œå¿…è¦çš„æ•°æ®æ¸…æ´—\n4. **å‚æ•°è®¾ç½®**ï¼šæ ¹æ®ç»Ÿè®¡å­¦åŸç†å’Œç”Ÿç‰©å­¦æ„ä¹‰è®¾ç½®åˆé€‚çš„å‚æ•°é˜ˆå€¼\n5. **ç»“æœéªŒè¯**ï¼šä½¿ç”¨å¤šç§æ–¹æ³•äº¤å‰éªŒè¯åˆ†æç»“æœçš„å¯é æ€§\n\nğŸ’¡ å¦‚æœæ‚¨èƒ½æä¾›æ›´å…·ä½“çš„ä¿¡æ¯ï¼ˆå¦‚æ•°æ®ç±»å‹ã€ç ”ç©¶ç›®æ ‡ç­‰ï¼‰ï¼Œæˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›æ›´ç²¾å‡†çš„å»ºè®®ã€‚`,
                confidence: 0.78,
                sources: ["æ ¹æ®æŸ¥è¯¢å†…å®¹åŠ¨æ€æ¨è"],
                model: "GLM-4-Flash"
            };
        }

        function performTraditionalSearch(query) {
            const queryLower = query.toLowerCase();
            const results = [];

            figureyaKnowledge.forEach(item => {
                let score = 0;

                // å…³é”®è¯åŒ¹é…
                item.keywords.forEach(keyword => {
                    if (queryLower.includes(keyword.toLowerCase())) {
                        score += 2;
                    }
                });

                // å†…å®¹åŒ¹é…
                if (queryLower.includes(item.module.toLowerCase())) {
                    score += 3;
                }

                if (score > 0) {
                    results.push({
                        ...item,
                        score: score
                    });
                }
            });

            return results.sort((a, b) => b.score - a.score);
        }

        function displayAIResult(result) {
            const resultsContainer = document.getElementById('resultsContainer');

            const aiHTML = `
                <div class="ai-response">
                    <h3>
                        <div class="ai-icon">AI</div>
                        æ™ºèƒ½åˆ†æç»“æœ (GLM-4-Flash)
                    </h3>
                    <div class="response-text">${formatAnswer(result.answer)}</div>
                    <div class="meta-info">
                        <div>
                            <strong>æ¨èæ¨¡å—:</strong> ${result.sources.join(', ')}
                        </div>
                        <div class="confidence-score">
                            ç½®ä¿¡åº¦: ${(result.confidence * 100).toFixed(0)}%
                        </div>
                    </div>
                </div>
            `;

            resultsContainer.innerHTML = aiHTML;
        }

        function displayTraditionalResults(results) {
            const resultsContainer = document.getElementById('resultsContainer');

            if (results.length === 0) {
                resultsContainer.innerHTML += '<div class="traditional-results"><p style="text-align: center; color: #666;">æœªæ‰¾åˆ°ç›¸å…³ç»“æœ</p></div>';
                return;
            }

            let traditionalHTML = '<div class="traditional-results"><h3 style="margin-bottom: 20px;">ğŸ“š ä¼ ç»Ÿæœç´¢ç»“æœ</h3>';

            results.forEach(result => {
                traditionalHTML += `
                    <div class="result-item" onclick="openModule('${result.module}')">
                        <div class="result-title">${result.title}</div>
                        <div class="result-snippet">${highlightTerms(result.content, document.getElementById('searchInput').value)}</div>
                        <div class="result-meta">æ¨¡å—: ${result.module} | ç›¸å…³åº¦: ${result.score}</div>
                    </div>
                `;
            });

            traditionalHTML += '</div>';
            resultsContainer.innerHTML += traditionalHTML;
        }

        function formatAnswer(answer) {
            return answer.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        }

        function highlightTerms(text, query) {
            const terms = query.split(/\s+/).filter(term => term.length > 1);
            let highlightedText = text;

            terms.forEach(term => {
                const regex = new RegExp(`(${term})`, 'gi');
                highlightedText = highlightedText.replace(regex, '<span class="highlight">$1</span>');
            });

            return highlightedText;
        }

        function openModule(module) {
            // è¿™é‡Œå¯ä»¥æ·»åŠ æ‰“å¼€å…·ä½“æ¨¡å—çš„é€»è¾‘
            showMessage(`å³å°†æ‰“å¼€æ¨¡å—: ${module}`, 'info');
        }

        function setLoading(loading) {
            isLoading = loading;
            const button = document.getElementById('searchButton');
            const icon = document.getElementById('searchIcon');
            const resultsContainer = document.getElementById('resultsContainer');

            if (loading) {
                button.classList.add('loading');
                icon.textContent = 'â³';
                resultsContainer.innerHTML = '<div class="loading-indicator"><div class="spinner"></div>AIæ­£åœ¨æ€è€ƒä¸­...</div>';
            } else {
                button.classList.remove('loading');
                icon.textContent = 'ğŸ”';
            }
        }

        function showMessage(message, type) {
            const resultsContainer = document.getElementById('resultsContainer');
            const alertClass = type === 'error' ? 'error-message' : 'info-message';
            resultsContainer.innerHTML = `<div class="${alertClass}">${message}</div>`;
        }

        // é”®ç›˜äº‹ä»¶ç›‘å¬
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            searchInput.focus();
        });
    </script>
</body>
</html>