# ğŸ”’ FigureYa AIæœç´¢ - éšç§å®‰å…¨æŒ‡å—

## âš ï¸ é‡è¦å®‰å…¨æé†’

æ‚¨çš„FigureYaæ˜¯**GitHubå…¬å¼€ä»“åº“**ï¼Œå› æ­¤éœ€è¦ç‰¹åˆ«æ³¨æ„APIå¯†é’¥å’Œæ•æ„Ÿä¿¡æ¯çš„ä¿æŠ¤ã€‚

## ğŸ” å·²é‡‡å–çš„å®‰å…¨æªæ–½

### 1. æ–‡ä»¶éš”ç¦»
- âœ… **`.env`** - åŒ…å«çœŸå®APIå¯†é’¥ï¼Œå·²æ·»åŠ åˆ° `.gitignore`
- âœ… **`.env.example`** - ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼Œå¯å®‰å…¨æäº¤
- âœ… **`.gitignore`** - å®Œæ•´çš„éšç§ä¿æŠ¤é…ç½®

### 2. å…¬å¼€å®‰å…¨ç‰ˆæœ¬
- âœ… **`figureya_ai_search_public.html`** - å®Œå…¨å®‰å…¨çš„æ¼”ç¤ºç‰ˆæœ¬
- âœ… **ä»…ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®** - ä¸éœ€è¦APIå¯†é’¥
- âœ… **å‰ç«¯å®ç°** - æ‰€æœ‰é€»è¾‘åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ

## ğŸš« å±é™©æ–‡ä»¶ï¼ˆä¸è¦æäº¤åˆ°å…¬å¼€ä»“åº“ï¼‰

ä»¥ä¸‹æ–‡ä»¶åŒ…å«æ‚¨çš„APIå¯†é’¥ï¼Œ**ç»å¯¹ä¸è¦æäº¤**ï¼š

```bash
.env                    # âŒ åŒ…å«çœŸå®æ™ºè°±AI APIå¯†é’¥
zhipuai_config.py        # âŒ å¯åŒ…å«APIå¯†é’¥
smart_figureya_rag.py   # âŒ å¯åŒ…å«APIå¯†é’¥
setup_api_keys.py       # âŒ å¯åŒ…å«APIå¯†é’¥
```

## âœ… å®‰å…¨æ–‡ä»¶ï¼ˆå¯ä»¥æäº¤åˆ°å…¬å¼€ä»“åº“ï¼‰

ä»¥ä¸‹æ–‡ä»¶æ˜¯å®‰å…¨çš„ï¼Œå¯ä»¥æäº¤ï¼š

```bash
figureya_ai_search_public.html  # âœ… çº¯æ¼”ç¤ºç‰ˆæœ¬
github_pages_rag_backend.py     # âœ… åç«¯ä»£ç ï¼ˆæ— å¯†é’¥ï¼‰
.github/workflows/deploy-ai-search.yml  # âœ… éƒ¨ç½²é…ç½®
.env.example                    # âœ… ç¤ºä¾‹é…ç½®ï¼ˆæ— çœŸå®å¯†é’¥ï¼‰
```

## ğŸ›¡ï¸ éšç§ä¿æŠ¤å»ºè®®

### 1. ç«‹å³æ¸…ç†æ•æ„Ÿæ–‡ä»¶
```bash
# 1. å°†.envæ·»åŠ åˆ°.gitignoreï¼ˆå·²å®Œæˆï¼‰
echo ".env" >> .gitignore

# 2. ä»Gitå†å²ä¸­ç§»é™¤æ•æ„Ÿæ–‡ä»¶
git rm --cached .env
git filter-branch --force --index-filter 'git rm --cached --ignore-unmatch .env' --prune-empty --tag-name-filter cat -- --all

# 3. ç¡®ä¿æ•æ„Ÿæ–‡ä»¶ä¸åœ¨è¿œç¨‹ä»“åº“
git push origin --force --all
```

### 2. ç¯å¢ƒå˜é‡ç®¡ç†
```bash
# æœ¬åœ°å¼€å‘
export ZHIPUAI_API_KEY="your-key-here"

# ç”Ÿäº§ç¯å¢ƒï¼ˆGitHub Actionsï¼‰
# åœ¨GitHub Secretsä¸­é…ç½®
ZHIPUAI_API_KEY: ${{ secrets.ZHIPUAI_API_KEY }}
```

### 3. ä»£ç å®¡æŸ¥æ£€æŸ¥æ¸…å•
- [ ] ç¡®è®¤æ²¡æœ‰ç¡¬ç¼–ç çš„APIå¯†é’¥
- [ ] æ£€æŸ¥ `.env` æ–‡ä»¶åœ¨ `.gitignore` ä¸­
- [ ] éªŒè¯æ•æ„Ÿæ–‡ä»¶ä¸åœ¨Gitå†å²ä¸­
- [ ] ç¡®è®¤GitHub Actionsä½¿ç”¨ç¯å¢ƒå˜é‡

## ğŸ” æ£€æŸ¥å½“å‰å®‰å…¨çŠ¶æ€

### è¿è¡Œå®‰å…¨æ£€æŸ¥
```bash
# æ£€æŸ¥å½“å‰.gitignoreå†…å®¹
cat .gitignore | grep -E "(\.env|api|key|secret)"

# æ£€æŸ¥æ˜¯å¦æœ‰æ•æ„Ÿæ–‡ä»¶è¢«è·Ÿè¸ª
git ls-files | grep -E "(\.env|api|key|secret)"

# æ£€æŸ¥ä»£ç ä¸­æ˜¯å¦æœ‰ç¡¬ç¼–ç å¯†é’¥
grep -r "sk-" . --exclude-dir=.git --exclude="*.md"
grep -r "53ea84c38" . --exclude-dir=.git --exclude="*.md"
```

## ğŸŒ æ¨èçš„éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆA: çº¯å‰ç«¯æ¼”ç¤ºï¼ˆæœ€å®‰å…¨ï¼‰
```bash
# ä½¿ç”¨ figureya_ai_search_public.html
# ä¼˜ç‚¹ï¼šå®Œå…¨å®‰å…¨ï¼Œæ— æœåŠ¡å™¨ä¾èµ–
# ç¼ºç‚¹ï¼šä»…æ¼”ç¤ºåŠŸèƒ½ï¼Œæ— çœŸå®AI
```

### æ–¹æ¡ˆB: åç«¯APIï¼ˆéœ€è¦å¯†é’¥ç®¡ç†ï¼‰
```bash
# åç«¯éƒ¨ç½²åˆ°ç§æœ‰æœåŠ¡å™¨
# APIå¯†é’¥å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­
# å‰ç«¯é€šè¿‡APIè°ƒç”¨åç«¯æœåŠ¡
```

### æ–¹æ¡ˆC: GitHub Actionsï¼ˆæ¨èï¼‰
```bash
# ä½¿ç”¨GitHub Secretsç®¡ç†APIå¯†é’¥
# è‡ªåŠ¨éƒ¨ç½²åˆ°GitHub Pages
# å¯†é’¥ä¸æš´éœ²åœ¨ä»£ç ä¸­
```

## ğŸ“‹ å®‰å…¨æ“ä½œæ­¥éª¤

### 1. ç«‹å³æ“ä½œ
```bash
# åœæ­¢æ‰€æœ‰åŒ…å«APIå¯†é’¥çš„è¿›ç¨‹
pkill -f figureya_rag

# æ¸…ç†æœ¬åœ°ç¯å¢ƒä¸­çš„å¯†é’¥æ–‡ä»¶
rm -f .env
cp .env.example .env
```

### 2. Gitæ¸…ç†
```bash
# æ£€æŸ¥å½“å‰çŠ¶æ€
git status

# ç§»é™¤æ•æ„Ÿæ–‡ä»¶
git rm --cached .env 2>/dev/null || true

# æäº¤å®‰å…¨ç‰ˆæœ¬
git add .gitignore .env.example figureya_ai_search_public.html
git commit -m "Add secure demo version and privacy protection"
git push origin main
```

### 3. éªŒè¯å®‰å…¨
```bash
# ç¡®è®¤è¿œç¨‹ä»“åº“æ²¡æœ‰æ•æ„Ÿæ–‡ä»¶
git ls-tree -r HEAD --name-only | grep -v ".md" | grep -v ".html" | grep -v ".js" | grep -v ".css"
```

## ğŸš€ æ¨èçš„å…¬å¼€ç‰ˆæœ¬æ¶æ„

### å‰ç«¯æ–‡ä»¶
```bash
figureya_ai_search_public.html  # ä¸»ç•Œé¢
css/style.css                   # æ ·å¼æ–‡ä»¶
js/search.js                    # æœç´¢é€»è¾‘
```

### åç«¯æ–‡ä»¶ï¼ˆå¯é€‰ï¼Œç§æœ‰éƒ¨ç½²ï¼‰
```bash
api/
â”œâ”€â”€ main.py                     # APIæœåŠ¡å™¨
â”œâ”€â”€ config.py                   # é…ç½®ç®¡ç†
â””â”€â”€ requirements.txt            # ä¾èµ–åŒ…
```

### é…ç½®æ–‡ä»¶
```bash
.env.example                   # ç¤ºä¾‹é…ç½®
docker-compose.yml            # Dockeré…ç½®
README.md                      # ä½¿ç”¨è¯´æ˜
```

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. APIå¯†é’¥ç®¡ç†
- âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡
- âœ… ä½¿ç”¨GitHub Secrets
- âœ… å®šæœŸè½®æ¢å¯†é’¥
- âœ… é™åˆ¶APIæƒé™èŒƒå›´

### 2. ä»£ç å®‰å…¨
- âœ… ä»£ç å®¡æŸ¥æ£€æŸ¥å¯†é’¥
- âœ… ä½¿ç”¨pre-commit hooks
- âœ… å®šæœŸå®‰å…¨æ‰«æ
- âœ… æœ€å°æƒé™åŸåˆ™

### 3. éƒ¨ç½²å®‰å…¨
- âœ… ä½¿ç”¨HTTPS
- âœ… é™åˆ¶APIè®¿é—®
- âœ… ç›‘æ§å¼‚å¸¸è®¿é—®
- âœ… æ—¥å¿—è„±æ•å¤„ç†

## ğŸ†˜ åº”æ€¥å¤„ç†

å¦‚æœå‘ç°APIå¯†é’¥å·²æ³„éœ²ï¼š

### 1. ç«‹å³æ’¤é”€å¯†é’¥
```bash
# æ™ºè°±AIæ§åˆ¶å°
https://bigmodel.cn/usercenter/proj-mgmt/apikeys
# ç«‹å³åˆ é™¤æˆ–ç¦ç”¨æ³„éœ²çš„å¯†é’¥
```

### 2. æ¸…ç†Gitå†å²
```bash
# ä½¿ç”¨BFG Repo-Cleaner
java -jar bfg.jar --delete-files .env
git reflog expire --expire=now --all
git gc --prune=now --aggressive
git push --force
```

### 3. ç›‘æ§ä½¿ç”¨æƒ…å†µ
- æ£€æŸ¥APIè°ƒç”¨æ—¥å¿—
- ç›‘æ§å¼‚å¸¸æ´»åŠ¨
- è®¾ç½®ä½¿ç”¨é™åˆ¶

## ğŸ“ è”ç³»ä¿¡æ¯

å¦‚æœå‘ç°å®‰å…¨é—®é¢˜ï¼š
- ç«‹å³åœæ­¢ç›¸å…³æœåŠ¡
- æ’¤é”€ç›¸å…³APIå¯†é’¥
- æ¸…ç†ä»£ç å’Œéƒ¨ç½²
- è”ç³»å¹³å°æ”¯æŒ

---

**âš ï¸ è¯·ç«‹å³æ‰§è¡Œå®‰å…¨æ¸…ç†æ“ä½œï¼Œç¡®ä¿APIå¯†é’¥ä¸è¢«æ³„éœ²ï¼**