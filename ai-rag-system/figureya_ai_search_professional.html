<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FigureYa AI Search - Professional Biomedical Analysis Assistant</title>
    <link rel="alternate" hreflang="en" href="https://ying-ge.github.io/FigureYa/ai-rag/figureya_ai_search_professional_en.html">
    <link rel="alternate" hreflang="zh" href="https://ying-ge.github.io/FigureYa/ai-rag/figureya_ai_search_professional_zh.html">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #1a73e8;
            --primary-hover: #1557b0;
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --text-disabled: #9aa0a6;
            --border-color: #dadce0;
            --background-primary: #ffffff;
            --background-secondary: #f8f9fa;
            --background-hover: #f1f3f4;
            --shadow-light: 0 1px 2px rgba(0, 0, 0, 0.1);
            --shadow-medium: 0 2px 8px rgba(0, 0, 0, 0.15);
            --shadow-heavy: 0 4px 16px rgba(0, 0, 0, 0.2);
            --border-radius: 4px;
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--background-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header and Navigation */
        header {
            border-bottom: 1px solid var(--border-color);
            background-color: var(--background-primary);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(8px);
            background-color: rgba(255, 255, 255, 0.95);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
        }

        .logo {
            font-size: 22px;
            font-weight: 500;
            color: var(--primary-color);
            text-decoration: none;
            transition: var(--transition);
        }

        .logo:hover {
            color: var(--primary-hover);
        }

        .nav-links {
            display: flex;
            gap: 32px;
            align-items: center;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
        }

        .nav-link:hover {
            color: var(--primary-color);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary-color);
            opacity: 0;
            transition: var(--transition);
        }

        .nav-link:hover::after {
            opacity: 1;
        }

        .github-link {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--background-primary);
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            transition: var(--transition);
        }

        .github-link:hover {
            background-color: var(--background-hover);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        /* Language Selector */
        .language-selector {
            position: relative;
        }

        .language-button {
            background: var(--background-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 6px 12px;
            font-size: 14px;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition);
        }

        .language-button:hover {
            background-color: var(--background-hover);
            border-color: var(--primary-color);
        }

        .language-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--background-primary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            min-width: 120px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-8px);
            transition: var(--transition);
            z-index: 1000;
        }

        .language-menu.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .language-option {
            display: block;
            padding: 8px 12px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 14px;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }

        .language-option:hover {
            background-color: var(--background-hover);
            color: var(--primary-color);
        }

        /* Main Content */
        main {
            padding: 48px 0;
        }

        .main-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .hero-section {
            text-align: center;
            margin-bottom: 48px;
        }

        .hero-title {
            font-size: 48px;
            font-weight: 400;
            color: var(--text-primary);
            margin-bottom: 16px;
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 32px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Search Section */
        .search-container {
            margin-bottom: 40px;
        }

        .search-box {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            padding: 16px 56px 16px 20px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 16px;
            background-color: var(--background-primary);
            transition: var(--transition);
            outline: none;
        }

        .search-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.1);
        }

        .search-input::placeholder {
            color: var(--text-disabled);
        }

        .search-button {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            border: none;
            border-radius: var(--border-radius);
            padding: 10px 16px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            font-size: 14px;
            font-weight: 500;
        }

        .search-button:hover {
            background-color: var(--primary-hover);
        }

        .search-button:active {
            transform: translateY(-50%) scale(0.98);
        }

        .search-icon {
            width: 18px;
            height: 18px;
        }

        /* Examples Section */
        .examples-section {
            margin-bottom: 48px;
        }

        .examples-title {
            text-align: center;
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 16px;
            font-weight: 500;
        }

        .example-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .example-chip {
            padding: 6px 12px;
            background-color: var(--background-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 13px;
            transition: var(--transition);
            cursor: pointer;
        }

        .example-chip:hover {
            background-color: var(--background-hover);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        /* Loading Spinner */
        .loading-container {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 48px;
            color: var(--text-secondary);
        }

        .loading-spinner {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-color);
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 12px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Results Section */
        .results-container {
            margin-top: 32px;
        }

        .result-card {
            background-color: var(--background-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-light);
            transition: var(--transition);
        }

        .result-card:hover {
            box-shadow: var(--shadow-medium);
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .result-badge {
            background-color: var(--background-secondary);
            color: var(--text-secondary);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .result-title {
            font-size: 20px;
            font-weight: 500;
            color: var(--text-primary);
            margin: 0;
        }

        .result-content {
            color: var(--text-primary);
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .result-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
            font-size: 14px;
            color: var(--text-secondary);
        }

        .confidence {
            font-weight: 500;
        }

        /* Demo Notice */
        .demo-notice {
            background-color: #fff8e1;
            border: 1px solid #ffecb3;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 32px;
        }

        .demo-notice-content {
            color: #e65100;
            font-size: 14px;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 48px;
        }

        .feature-card {
            background-color: var(--background-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            transition: var(--transition);
        }

        .feature-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .feature-title {
            font-size: 18px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .feature-description {
            color: var(--text-secondary);
            line-height: 1.5;
            font-size: 14px;
        }

        /* Footer */
        footer {
            background-color: var(--background-secondary);
            border-top: 1px solid var(--border-color);
            padding: 32px 0;
            margin-top: 64px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-links {
            display: flex;
            gap: 24px;
        }

        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            transition: var(--transition);
        }

        .footer-link:hover {
            color: var(--primary-color);
        }

        .copyright {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }

            .nav-links {
                display: none;
            }

            .hero-title {
                font-size: 32px;
            }

            .hero-subtitle {
                font-size: 16px;
            }

            .search-input {
                padding: 14px 48px 14px 16px;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .footer-content {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
        }

        /* Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-card {
            animation: fadeIn 0.3s ease-out;
        }

        /* Focus styles for accessibility */
        .search-button:focus,
        .example-chip:focus,
        .language-button:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        .nav-link:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 0;
        }
    </style>
</head>
<body>
    <header>
        <nav class="container">
            <a href="https://ying-ge.github.io/FigureYa/" class="logo">FigureYa</a>
            <div class="nav-links">
                <a href="https://ying-ge.github.io/FigureYa/" class="nav-link" id="nav-home">Home</a>
                <a href="https://ying-ge.github.io/FigureYa/" class="nav-link" id="nav-modules">Modules</a>
                <div class="language-selector">
                    <button class="language-button" id="language-toggle">
                        <span id="current-lang">English</span>
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </button>
                    <div class="language-menu" id="language-menu">
                        <button class="language-option" id="lang-en">English</button>
                        <button class="language-option" id="lang-zh">中文</button>
                    </div>
                </div>
                <a href="https://github.com/ying-ge/FigureYa" class="github-link" target="_blank">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    GitHub
                </a>
            </div>
        </nav>
    </header>

    <main>
        <div class="container">
            <div class="main-container">
                <section class="hero-section">
                    <h1 class="hero-title" data-i18n="hero-title">Intelligent Biomedical Data Analysis</h1>
                    <p class="hero-subtitle" data-i18n="hero-subtitle">AI-powered search and recommendations for FigureYa's 300+ biomedical visualization modules</p>
                </section>

                <div class="demo-notice">
                    <div class="demo-notice-content" data-i18n="demo-notice">
                        <strong>Demo Version:</strong> This is a demonstration of AI search capabilities. Full functionality requires API configuration.
                    </div>
                </div>

                <div class="search-container">
                    <div class="search-box">
                        <input
                            type="text"
                            class="search-input"
                            id="searchInput"
                            placeholder="Ask about biomedical data analysis methods..."
                            autocomplete="off"
                        >
                        <button class="search-button" id="search-button">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                            <span data-i18n="search-button">Search</span>
                        </button>
                    </div>
                </div>

                <div class="examples-section">
                    <h3 class="examples-title" data-i18n="examples-title">Try these examples:</h3>
                    <div class="example-chips">
                        <a href="#" class="example-chip" onclick="setQuery('RNA-seq differential expression analysis')">RNA-seq differential expression analysis</a>
                        <a href="#" class="example-chip" onclick="setQuery('survival analysis Cox regression')">survival analysis Cox regression</a>
                        <a href="#" class="example-chip" onclick="setQuery('single-cell RNA-seq quality control')">single-cell RNA-seq quality control</a>
                        <a href="#" class="example-chip" onclick="setQuery('PCA analysis for high-dimensional data')">PCA analysis for high-dimensional data</a>
                        <a href="#" class="example-chip" onclick="setQuery('interpreting volcano plot results')">interpreting volcano plot results</a>
                        <a href="#" class="example-chip" onclick="setQuery('statistical test selection guidelines')">statistical test selection guidelines</a>
                    </div>
                </div>

                <section id="features" class="features-grid">
                    <div class="feature-card">
                        <h3 class="feature-title" data-i18n="feature-1-title">Intelligent Understanding</h3>
                        <p class="feature-description" data-i18n="feature-1-desc">Advanced language models understand complex biomedical queries beyond simple keyword matching, providing contextual and relevant responses.</p>
                    </div>
                    <div class="feature-card">
                        <h3 class="feature-title" data-i18n="feature-2-title">Professional Recommendations</h3>
                        <p class="feature-description" data-i18n="feature-2-desc">AI-powered analysis suggestions based on established biomedical research methods and best practices for data visualization and interpretation.</p>
                    </div>
                    <div class="feature-card">
                        <h3 class="feature-title" data-i18n="feature-3-title">Module Selection</h3>
                        <p class="feature-description" data-i18n="feature-3-desc">Automatically recommends the most appropriate FigureYa modules based on your specific data type, research question, and analysis requirements.</p>
                    </div>
                    <div class="feature-card">
                        <h3 class="feature-title" data-i18n="feature-4-title">Parameter Guidance</h3>
                        <p class="feature-description" data-i18n="feature-4-desc">Detailed parameter configuration advice including statistical thresholds, quality control metrics, and optimization strategies for different analysis scenarios.</p>
                    </div>
                </section>

                <div class="results-container" id="resultsContainer">
                    <!-- Results will be displayed here -->
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="https://ying-ge.github.io/FigureYa/" target="_blank" class="footer-link" data-i18n="footer-project">FigureYa Project</a>
                    <a href="https://github.com/ying-ge/FigureYa" target="_blank" class="footer-link" data-i18n="footer-documentation">Documentation</a>
                    <a href="https://doi.org/10.1002/imm3.70005" target="_blank" class="footer-link" data-i18n="footer-publication">Publication</a>
                </div>
                <p class="copyright" data-i18n="footer-copyright">© 2025 FigureYa. AI Search Assistant for Biomedical Data Analysis</p>
            </div>
        </div>
    </footer>

    <script>
        // Language translations
        const translations = {
            en: {
                'page-title': 'FigureYa AI Search - Professional Biomedical Analysis Assistant',
                'nav-home': 'Home',
                'nav-modules': 'Modules',
                'hero-title': 'Intelligent Biomedical Data Analysis',
                'hero-subtitle': 'AI-powered search and recommendations for FigureYa\'s 300+ biomedical visualization modules',
                'demo-notice': '<strong>Demo Version:</strong> This is a demonstration of AI search capabilities. Full functionality requires API configuration.',
                'search-placeholder': 'Ask about biomedical data analysis methods...',
                'search-button': 'Search',
                'examples-title': 'Try these examples:',
                'feature-1-title': 'Intelligent Understanding',
                'feature-1-desc': 'Advanced language models understand complex biomedical queries beyond simple keyword matching, providing contextual and relevant responses.',
                'feature-2-title': 'Professional Recommendations',
                'feature-2-desc': 'AI-powered analysis suggestions based on established biomedical research methods and best practices for data visualization and interpretation.',
                'feature-3-title': 'Module Selection',
                'feature-3-desc': 'Automatically recommends the most appropriate FigureYa modules based on your specific data type, research question, and analysis requirements.',
                'feature-4-title': 'Parameter Guidance',
                'feature-4-desc': 'Detailed parameter configuration advice including statistical thresholds, quality control metrics, and optimization strategies for different analysis scenarios.',
                'footer-project': 'FigureYa Project',
                'footer-documentation': 'Documentation',
                'footer-publication': 'Publication',
                'footer-copyright': '© 2025 FigureYa. AI Search Assistant for Biomedical Data Analysis',
                'processing-query': 'Processing your query...',
                'enter-query': 'Please enter a search query',
                'search-error': 'Search error: ',
                'recommended-modules': 'Recommended modules: ',
                'confidence': 'Confidence: '
            },
            zh: {
                'page-title': 'FigureYa AI搜索 - 专业生物医学分析助手',
                'nav-home': '首页',
                'nav-modules': '模块',
                'hero-title': '智能生物医学数据分析',
                'hero-subtitle': '基于AI的搜索和推荐功能，支持FigureYa 300+生物医学可视化模块',
                'demo-notice': '<strong>演示版本：</strong>这是AI搜索功能的演示。完整功能需要API配置。',
                'search-placeholder': '询问生物医学数据分析方法...',
                'search-button': '搜索',
                'examples-title': '尝试这些示例：',
                'feature-1-title': '智能理解',
                'feature-1-desc': '先进的语言模型能够理解复杂的生物医学查询，超越简单的关键词匹配，提供上下文相关和有意义的回应。',
                'feature-2-title': '专业推荐',
                'feature-2-desc': '基于既定生物医学研究方法和数据可视化及解释最佳实践的AI驱动分析建议。',
                'feature-3-title': '模块选择',
                'feature-3-desc': '根据您的特定数据类型、研究问题和分析需求，自动推荐最合适的FigureYa模块。',
                'feature-4-title': '参数指导',
                'feature-4-desc': '详细的参数配置建议，包括统计阈值、质量控制指标以及不同分析场景的优化策略。',
                'footer-project': 'FigureYa项目',
                'footer-documentation': '文档',
                'footer-publication': '出版物',
                'footer-copyright': '© 2025 FigureYa. 生物医学数据分析AI搜索助手',
                'processing-query': '正在处理您的查询...',
                'enter-query': '请输入搜索查询',
                'search-error': '搜索错误：',
                'recommended-modules': '推荐模块：',
                'confidence': '置信度：'
            }
        };

        // AI response database with translations
        const aiResponses = {
            "RNA-seq": {
                title: {
                    en: "RNA-seq Differential Expression Analysis",
                    zh: "RNA-seq差异表达分析"
                },
                badge: {
                    en: "Analysis Type",
                    zh: "分析类型"
                },
                content: {
                    en: `For RNA-seq differential expression analysis, I recommend using <strong>FigureYa59volcanoV2</strong> and <strong>FigureYa9heatmap</strong> modules.

<strong>Recommended Methods:</strong>
• DESeq2: Suitable for most RNA-seq datasets with sample sizes ≥ 6
• edgeR: Effective for small sample sizes or complex experimental designs
• limma-voom: Works well for large datasets and provides fast computation

<strong>Key Parameters:</strong>
• Adjusted p-value threshold: 0.05 for statistical significance
• Log fold change threshold: 1.0 (2-fold change) for biological significance
• FDR correction: Benjamini-Hochberg method for multiple testing

<strong>Analysis Workflow:</strong>
1. Data quality assessment and filtering
2. Normalization and batch effect correction
3. Differential expression testing
4. Result visualization and interpretation
5. Pathway enrichment analysis for biological insights`,
                    zh: `对于RNA-seq差异表达分析，我推荐使用<strong>FigureYa59volcanoV2</strong>和<strong>FigureYa9heatmap</strong>模块。

<strong>推荐方法：</strong>
• DESeq2：适用于样本量≥6的大多数RNA-seq数据集
• edgeR：对小样本量或复杂实验设计有效
• limma-voom：适用于大型数据集并提供快速计算

<strong>关键参数：</strong>
• 校正p值阈值：0.05用于统计显著性
• 对数倍数变化阈值：1.0（2倍变化）用于生物学显著性
• FDR校正：Benjamini-Hochberg方法用于多重检验

<strong>分析流程：</strong>
1. 数据质量评估和过滤
2. 标准化和批次效应校正
3. 差异表达检验
4. 结果可视化和解释
5. 通路富集分析用于生物学洞察`
                },
                confidence: 92,
                sources: ["FigureYa59volcanoV2", "FigureYa9heatmap"],
                model: "GLM-4"
            },
            "survival": {
                title: {
                    en: "Survival Analysis Methods",
                    zh: "生存分析方法"
                },
                badge: {
                    en: "Analysis Type",
                    zh: "分析类型"
                },
                content: {
                    en: `For survival analysis, I recommend using <strong>FigureYa36nSurvV3</strong> and <strong>FigureYa1survivalCurve_update</strong> modules.

<strong>Method Selection:</strong>
• Kaplan-Meier estimator: Non-parametric method for survival curve estimation
• Cox proportional hazards model: Semi-parametric regression for multivariate analysis
• Log-rank test: Non-parametric test for comparing survival curves

<strong>Key Considerations:</strong>
• Ensure sufficient events (minimum 10 events per group recommended)
• Check proportional hazards assumption for Cox models
• Include relevant covariates in multivariate analysis
• Consider competing risks when appropriate

<strong>Interpretation Guidelines:</strong>
• Hazard Ratio (HR) > 1: Increased risk factor
• HR < 1: Protective factor
• 95% Confidence Interval: Statistical significance assessment
• Median survival times: Descriptive statistics for each group`,
                    zh: `对于生存分析，我推荐使用<strong>FigureYa36nSurvV3</strong>和<strong>FigureYa1survivalCurve_update</strong>模块。

<strong>方法选择：</strong>
• Kaplan-Meier估计量：生存曲线估计的非参数方法
• Cox比例风险模型：多变量分析的半参数回归
• Log-rank检验：比较生存曲线的非参数检验

<strong>关键考虑因素：</strong>
• 确保足够的事件数（建议每组最少10个事件）
• 检查Cox模型的比例风险假设
• 在多变量分析中包含相关协变量
• 适当时考虑竞争风险

<strong>解释指南：</strong>
• 风险比(HR) > 1：风险增加因素
• HR < 1：保护因素
• 95%置信区间：统计显著性评估
• 中位生存时间：每组的描述性统计`
                },
                confidence: 89,
                sources: ["FigureYa36nSurvV3", "FigureYa1survivalCurve_update"],
                model: "GLM-4"
            },
            "single-cell": {
                title: {
                    en: "Single-Cell RNA Sequencing Analysis",
                    zh: "单细胞RNA测序分析"
                },
                badge: {
                    en: "Analysis Type",
                    zh: "分析类型"
                },
                content: {
                    en: `For single-cell RNA-seq analysis, I recommend using <strong>FigureYa274MuSiCbulkProop</strong> and <strong>FigureYa243scMarkerGroupHeatmap</strong> modules.

<strong>Comprehensive Analysis Pipeline:</strong>

1. <strong>Data Quality Control</strong>
   • Cells with 200-6000 detected genes
   • Mitochondrial gene percentage < 10-15%
   • rRNA percentage < 5%
   • Remove doublets and dead cells

2. <strong>Data Normalization</strong>
   • Library size normalization
   • Log-transformation with pseudocount
   • Batch effect correction if needed

3. <strong>Dimensionality Reduction</strong>
   • Principal Component Analysis (PCA)
   • UMAP or t-SNE for visualization
   • Identify optimal number of principal components

4. <strong>Clustering Analysis</strong>
   • Cell type identification
   • Subpopulation discovery
   • Marker gene selection

5. <strong>Differential Expression</strong>
   • Cluster comparison analysis
   • Marker gene identification
   • Functional enrichment analysis`,
                    zh: `对于单细胞RNA-seq分析，我推荐使用<strong>FigureYa274MuSiCbulkProop</strong>和<strong>FigureYa243scMarkerGroupHeatmap</strong>模块。

<strong>综合分析流程：</strong>

1. <strong>数据质量控制</strong>
   • 检测到200-6000个基因的细胞
   • 线粒体基因百分比 < 10-15%
   • rRNA百分比 < 5%
   • 去除双细胞和死细胞

2. <strong>数据标准化</strong>
   • 文库大小标准化
   • 添加伪计数后进行对数转换
   • 必要时进行批次效应校正

3. <strong>降维分析</strong>
   • 主成分分析(PCA)
   • UMAP或t-SNE用于可视化
   • 确定最优主成分数量

4. <strong>聚类分析</strong>
   • 细胞类型识别
   • 亚群发现
   • 标记基因选择

5. <strong>差异表达</strong>
   • 聚类比较分析
   • 标记基因识别
   • 功能富集分析`
                },
                confidence: 95,
                sources: ["FigureYa274MuSiCbulkProop", "FigureYa243scMarkerGroupHeatmap"],
                model: "GLM-4"
            },
            "PCA": {
                title: {
                    en: "Principal Component Analysis",
                    zh: "主成分分析"
                },
                badge: {
                    en: "Analysis Type",
                    zh: "分析类型"
                },
                content: {
                    en: `For PCA analysis, I recommend using <strong>FigureYa38PCA</strong> and <strong>FigureYa164PCA3D</strong> modules.

<strong>Analysis Framework:</strong>

<strong>Data Preparation:</strong>
• Standardization (z-score normalization)
• Missing value handling strategies
• Outlier detection and removal
• Ensure variables are approximately normally distributed

<strong>Component Selection:</strong>
• Elbow method: Identify point of diminishing returns
• Kaiser criterion: Retain components with eigenvalues > 1
• Cumulative variance: Retain components explaining ≥85% of total variance
• Cross-validation: Verify component stability

<strong>Result Interpretation:</strong>
• PC1: Explains the largest proportion of variance
• Loading scores: Variable contribution to each component
• Sample clustering: Identify patterns and relationships
• Biplots: Visualize relationships between variables and samples

<strong>Applications:</strong>
• Dimensionality reduction for complex datasets
• Noise reduction and signal enhancement
• Pattern recognition and outlier detection
• Data visualization and exploratory analysis`,
                    zh: `对于PCA分析，我推荐使用<strong>FigureYa38PCA</strong>和<strong>FigureYa164PCA3D</strong>模块。

<strong>分析框架：</strong>

<strong>数据准备：</strong>
• 标准化（z分数标准化）
• 缺失值处理策略
• 异常值检测和去除
• 确保变量近似正态分布

<strong>成分选择：</strong>
• 肘部法则：识别收益递减点
• Kaiser准则：保留特征值>1的成分
• 累积方差：保留解释≥85%总方差的成分
• 交叉验证：验证成分稳定性

<strong>结果解释：</strong>
• PC1：解释最大比例的方差
• 载荷得分：变量对每个成分的贡献
• 样本聚类：识别模式和关系
• 双标图：可视化变量和样本之间的关系

<strong>应用：</strong>
• 复杂数据集的降维
• 噪声减少和信号增强
• 模式识别和异常值检测
• 数据可视化和探索性分析`
                },
                confidence: 87,
                sources: ["FigureYa38PCA", "FigureYa164PCA3D"],
                model: "GLM-4"
            }
        };

        // Language management
        let currentLanguage = localStorage.getItem('figureya-language') || 'en';
        let isLoading = false;

        function updateLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('figureya-language', lang);

            // Update page title
            document.title = translations[lang]['page-title'];

            // Update HTML lang attribute
            document.documentElement.lang = lang;

            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    // Handle HTML content for some elements
                    if (key === 'demo-notice') {
                        element.innerHTML = translations[lang][key];
                    } else {
                        element.textContent = translations[lang][key];
                    }
                }
            });

            // Update placeholder
            document.getElementById('searchInput').placeholder = translations[lang]['search-placeholder'];

            // Update search button
            const searchButton = document.getElementById('search-button');
            searchButton.innerHTML = `
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
                <span>${translations[lang]['search-button']}</span>
            `;

            // Update language button
            document.getElementById('current-lang').textContent = lang === 'en' ? 'English' : '中文';
        }

        function switchLanguage(lang) {
            if (lang !== currentLanguage) {
                updateLanguage(lang);
            }
        }

        // Language dropdown functionality
        document.getElementById('language-toggle').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('language-menu').classList.toggle('show');
        });

        document.getElementById('lang-en').addEventListener('click', function(e) {
            e.stopPropagation();
            switchLanguage('en');
            document.getElementById('language-menu').classList.remove('show');
        });

        document.getElementById('lang-zh').addEventListener('click', function(e) {
            e.stopPropagation();
            switchLanguage('zh');
            document.getElementById('language-menu').classList.remove('show');
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function() {
            document.getElementById('language-menu').classList.remove('show');
        });

        function setQuery(query) {
            document.getElementById('searchInput').value = query;
            performSearch();
        }

        async function performSearch() {
            if (isLoading) return;

            const query = document.getElementById('searchInput').value.trim();
            if (!query) {
                const t = translations[currentLanguage];
                showMessage(t['enter-query']);
                return;
            }

            setLoading(true);
            const resultsContainer = document.getElementById('resultsContainer');

            try {
                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1200));

                // Generate AI response
                const aiResult = generateAIResponse(query);
                displayResult(aiResult);

            } catch (error) {
                const t = translations[currentLanguage];
                showMessage(t['search-error'] + error.message);
            } finally {
                setLoading(false);
            }
        }

        function generateAIResponse(query) {
            const queryLower = query.toLowerCase();

            // Match responses based on keywords
            for (const [key, value] of Object.entries(aiResponses)) {
                if (queryLower.includes(key.toLowerCase())) {
                    return {
                        query: query,
                        title: value.title[currentLanguage] || value.title.en,
                        badge: value.badge[currentLanguage] || value.badge.en,
                        content: value.content[currentLanguage] || value.content.en,
                        confidence: value.confidence,
                        sources: value.sources,
                        model: value.model
                    };
                }
            }

            // Default response
            const defaultResponse = {
                title: {
                    en: "General Biomedical Analysis Guidance",
                    zh: "通用生物医学分析指导"
                },
                badge: {
                    en: "General",
                    zh: "通用"
                },
                content: {
                    en: `Based on your query "${query}", here are some general recommendations for biomedical data analysis:

<strong>Analysis Framework:</strong>
1. Define clear research questions and hypotheses
2. Choose appropriate statistical methods based on data type
3. Ensure data quality through proper preprocessing
4. Validate assumptions and check model diagnostics
5. Interpret results in biological context

<strong>Recommended Modules:</strong>
• <strong>FigureYa59volcanoV2</strong>: For differential expression analysis
• <strong>FigureYa38PCA</strong>: For data dimensionality reduction
• <strong>FigureYa36nSurvV3</strong>: For survival analysis
• <strong>FigureYa274MuSiCbulkProop</strong>: For single-cell analysis

<strong>Best Practices:</strong>
• Maintain reproducible analysis workflows
• Document all parameter decisions and rationale
• Perform sensitivity analyses to assess robustness
• Validate findings through independent methods when possible

For more specific guidance, please provide details about your data type, sample size, and research objectives.`,
                    zh: `基于您的查询"${query}"，以下是一些生物医学数据分析的通用建议：

<strong>分析框架：</strong>
1. 定义明确的研究问题和假设
2. 根据数据类型选择合适的统计方法
3. 通过适当的预处理确保数据质量
4. 验证假设并检查模型诊断
5. 在生物学背景下解释结果

<strong>推荐模块：</strong>
• <strong>FigureYa59volcanoV2</strong>：用于差异表达分析
• <strong>FigureYa38PCA</strong>：用于数据降维
• <strong>FigureYa36nSurvV3</strong>：用于生存分析
• <strong>FigureYa274MuSiCbulkProop</strong>：用于单细胞分析

<strong>最佳实践：</strong>
• 维持可重现的分析工作流程
• 记录所有参数决策和基本原理
• 执行敏感性分析以评估稳健性
• 尽可能通过独立方法验证发现

如需更具体的指导，请提供关于您的数据类型、样本大小和研究目标的详细信息。`
                }
            };

            return {
                query: query,
                title: defaultResponse.title[currentLanguage] || defaultResponse.title.en,
                badge: defaultResponse.badge[currentLanguage] || defaultResponse.badge.en,
                content: defaultResponse.content[currentLanguage] || defaultResponse.content.en,
                confidence: 78,
                sources: ["Dynamic recommendations based on query"],
                model: "GLM-4"
            };
        }

        function displayResult(result) {
            const resultsContainer = document.getElementById('resultsContainer');
            const t = translations[currentLanguage];

            const resultHTML = `
                <div class="result-card">
                    <div class="result-header">
                        <span class="result-badge">${result.badge}</span>
                        <h3 class="result-title">${result.title}</h3>
                    </div>
                    <div class="result-content">
                        ${formatContent(result.content)}
                    </div>
                    <div class="result-meta">
                        <div>${t['recommended-modules']}${result.sources.join(', ')}</div>
                        <div class="confidence">${t['confidence']}${result.confidence}%</div>
                    </div>
                </div>
            `;

            resultsContainer.innerHTML = resultHTML;
        }

        function formatContent(content) {
            return content
                .replace(/\n\n/g, '</p><p>')
                .replace(/\n/g, '<br>')
                .replace(/^(.+)/gm, match => match)
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        }

        function setLoading(loading) {
            isLoading = loading;
            const button = document.querySelector('.search-button');
            const resultsContainer = document.getElementById('resultsContainer');
            const t = translations[currentLanguage];

            if (loading) {
                button.innerHTML = `
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2v20M17 7H7l5 5 5 5" stroke-linecap="round"/>
                    </svg>
                `;
                resultsContainer.innerHTML = `
                    <div class="loading-container">
                        <div class="loading-spinner"></div>
                        ${t['processing-query']}
                    </div>
                `;
            } else {
                button.innerHTML = `
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <span>${t['search-button']}</span>
                `;
            }
        }

        function showMessage(message) {
            const resultsContainer = document.getElementById('resultsContainer');
            resultsContainer.innerHTML = `
                <div class="result-card">
                    <div class="result-content">${message}</div>
                </div>
            `;
        }

        // Event listeners
        document.getElementById('search-button').addEventListener('click', performSearch);
        document.getElementById('searchInput').addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateLanguage(currentLanguage);
            document.getElementById('searchInput').focus();
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>